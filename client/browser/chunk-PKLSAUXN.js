import{c as y,e as C,f as c,g as x,h as E,i as I,k as N,l as D,p as F,q as w}from"./chunk-D4MFZBGS.js";import{A as d,H as r,I as o,J as s,L as g,Q as a,T as v,U as b,V as R,aa as S,ba as q,ca as B,fa as $,g as h,h as k,ha as j,ja as V,ka as G,m as P,ma as A,n as L,q as T,v as p,w as m}from"./chunk-G362BYZJ.js";import"./chunk-VHCA6YAO.js";var u=(()=>{let t=class t{constructor(e){this.http=e}userLogin(e){return this.http.post(`${y}/user-login`,e)}userReg(e){return this.http.post(`${y}/user-reg`,e)}adminLogin(e){return this.http.post(`${y}/admin-login`,e)}verifyEmail(e){return this.http.post(`${y}/verify-email`,{email:e})}checkMail(e){let i=new q().append("id",e);return this.http.get(`${y}/check-mail`,{params:i})}};t.\u0275fac=function(i){return new(i||t)(T(B))},t.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Q=()=>["../../verify-email"],W=(()=>{let t=class t{constructor(e,i,l,f){this.route=e,this.authService=i,this.formBuilder=l,this.router=f}ngOnInit(){this.route.params.subscribe(e=>{this.authChk=e.id}),this.loginData=this.formBuilder.group({email:[null,[c.required,c.email]],password:[null,c.required]})}onSubmit(){this.authChk=="admin"?this.adminLogin():this.authChk=="user"&&this.userLogin()}adminLogin(){this.authService.adminLogin(this.loginData.value).subscribe({next:e=>{console.log(e),e.message=="success"?(localStorage.setItem("token",e.token),localStorage.setItem("user",e.user),this.router.navigate(["/admin"])):console.log(e)},error:e=>{console.log(e)}})}userLogin(){this.authService.userLogin(this.loginData.value).subscribe({next:e=>{e.message=="success"?(localStorage.setItem("token",e.token),localStorage.setItem("user",e.user),console.log(e),this.router.navigate(["/"])):console.log(e)},error:e=>{console.log(e)}})}};t.\u0275fac=function(i){return new(i||t)(m(j),m(u),m(F),m(V))},t.\u0275cmp=h({type:t,selectors:[["app-login"]],standalone:!0,features:[v([u]),b],decls:22,vars:3,consts:[[1,"row"],[1,"col-md-6","m-auto","mt-5"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","aria-describedby","emailHelp","formControlName","email",1,"form-control"],["id","emailHelp",1,"form-text"],["for","exampleInputPassword1",1,"form-label"],["type","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary"],[2,"text-decoration","none",3,"routerLink"]],template:function(i,l){i&1&&(r(0,"div",0)(1,"div",1)(2,"h3"),a(3,"Login"),o(),s(4,"hr"),r(5,"form",2),g("ngSubmit",function(){return l.onSubmit()}),r(6,"div",3)(7,"label",4),a(8,"Email address"),o(),s(9,"input",5),r(10,"div",6),a(11,"We'll never share your email with anyone else."),o()(),r(12,"div",3)(13,"label",7),a(14,"Password"),o(),s(15,"input",8),o(),r(16,"button",9),a(17,"Login"),o()(),r(18,"p"),a(19,"Not a member "),r(20,"a",10),a(21,"Register"),o()()()()),i&2&&(p(5),d("formGroup",l.loginData),p(15),d("routerLink",R(2,Q)))},dependencies:[G,S,w,I,C,x,E,N,D]});let n=t;return n})();var U=(()=>{let t=class t{constructor(e,i,l,f){this.route=e,this.router=i,this.authService=l,this.fb=f}ngOnInit(){this.route.params.subscribe(e=>{this.mailId=e.id}),this.checkMail(),this.regData=this.fb.group({username:[null,c.required],password:[null,c.required],confirm:[null,c.required],email:[null]})}checkMail(){this.authService.checkMail(this.mailId).subscribe({next:e=>{console.log(e),e.message=="success"?(this.email=e.data.email,console.log(this.email)):this.router.navigate(["/auth/verify-email"])},error:e=>{console.log(e),this.router.navigate(["/auth/verify-email"])}})}onSubmit(){this.regData.valid&&this.regData.value.password==this.regData.value.confirm&&(this.regData.patchValue({email:this.email}),this.authService.userReg(this.regData.value).subscribe({next:e=>{e.message=="success"?(console.log(e),this.router.navigate(["/auth/login/user"])):console.log(e)},error:e=>{console.log(e)}}))}};t.\u0275fac=function(i){return new(i||t)(m(j),m(V),m(u),m(F))},t.\u0275cmp=h({type:t,selectors:[["app-register"]],standalone:!0,features:[v([u]),b],decls:22,vars:1,consts:[[1,"row"],[1,"col-md-6","m-auto","mt-5"],["id","emailHelp",1,"form-text"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","username",1,"form-control"],["type","password","formControlName","password",1,"form-control"],["type","password","formControlName","confirm",1,"form-control"],["type","submit","type","submit",1,"btn","btn-primary"]],template:function(i,l){i&1&&(r(0,"div",0)(1,"div",1)(2,"h3"),a(3,"Register"),o(),s(4,"hr"),r(5,"div",2),a(6,"We'll never share your email with anyone else."),o(),r(7,"form",3),g("ngSubmit",function(){return l.onSubmit()}),r(8,"div",4)(9,"label",5),a(10,"UserName"),o(),s(11,"input",6),o(),r(12,"div",4)(13,"label",5),a(14,"Password"),o(),s(15,"input",7),o(),r(16,"div",4)(17,"label",5),a(18,"Confirm Password"),o(),s(19,"input",8),o(),r(20,"button",9),a(21,"Register"),o()()()()),i&2&&(p(7),d("formGroup",l.regData))},dependencies:[w,I,C,x,E,N,D,S]});let n=t;return n})();var X=()=>["../login/user"],z=(()=>{let t=class t{constructor(e,i){this.fb=e,this.authService=i}ngOnInit(){this.regData=this.fb.group({email:[null,[c.required,c.email]]})}onSubmit(){this.authService.verifyEmail(this.regData.value.email).subscribe({next:e=>{e.meessage=="success",console.log(e)},error:e=>{console.log(e)}})}};t.\u0275fac=function(i){return new(i||t)(m(F),m(u))},t.\u0275cmp=h({type:t,selectors:[["app-verify-email"]],standalone:!0,features:[v([u]),b],decls:18,vars:3,consts:[[1,"row"],[1,"col-md-6","m-auto","mt-5"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","aria-describedby","emailHelp","formControlName","email",1,"form-control"],["id","emailHelp",1,"form-text"],["type","submit",1,"btn","btn-primary"],[2,"text-decoration","none",3,"routerLink"]],template:function(i,l){i&1&&(r(0,"div",0)(1,"div",1)(2,"h3"),a(3,"Register"),o(),s(4,"hr"),r(5,"form",2),g("ngSubmit",function(){return l.onSubmit()}),r(6,"div",3)(7,"label",4),a(8,"Email address"),o(),s(9,"input",5),r(10,"div",6),a(11,"We'll never share your email with anyone else."),o()(),r(12,"button",7),a(13,"Verify Email"),o()(),r(14,"p"),a(15,"Allready a member "),r(16,"a",8),a(17,"Login"),o()()()()),i&2&&(p(5),d("formGroup",l.regData),p(11),d("routerLink",R(2,X)))},dependencies:[G,w,I,C,x,E,N,D]});let n=t;return n})();var Y=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login/:id",component:W},{path:"register/:id",component:U},{path:"verify-email",component:z,pathMatch:"full"}],J=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=k({type:t}),t.\u0275inj=L({imports:[A.forChild(Y),A]});let n=t;return n})();var xe=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=k({type:t}),t.\u0275inj=L({imports:[S,J,$]});let n=t;return n})();export{xe as AuthModule};
